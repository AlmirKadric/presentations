<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>M.A.G.E Bot Module</title>

		<meta name="description" content="A brief introduction to the M.A.G.E Bot module">
		<meta name="author" content="Almir Kadric">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/wizcorp.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
		
			<header style="position:fixed">
           		<img src="assets/logo.png" style="padding-left:50px;" />
        	</header>
        	
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown>
					# M.A.G.E Bot Module
				</section>

				<section>
					<h2>What is it and why do we need it</h2>
					<ol>
						<li class="fragment">A bot is a game client which can execute a set of predefined behaviour driven user commands in an automated fashion.</li>
						<li class="fragment">This allows us to repeat possible user action paths very quickly multiple times.</li>
						<li class="fragment">And it saves us time in having to do these in a manual fashion, i.e. tapping on your iPhone screen.</li>
					</ol>
				</section>

				<section>
					<section data-markdown>
						## How does it work
					</section>
					<section data-markdown>
						### Bot User Management API
						#### Function registration
							exports.register('createBotPlayer', function (state, args, cb) {
							});

							exports.register('updateBotPlayer', function (state, args, cb) {
							});

							exports.register('confirmBotPlayer', function (state, args, cb) {
							});
					</section>
					<section data-markdown>
						### Game User Commands
						#### How we currently do it
							function setupUserCommands(cb) {
								// SOME OTHER LOGIC
								
								app.commandCenter.expose(
									{},	// no requirements
									{
										...
									}
								);
								app.commandCenter.expose(
									{ hooks: ['mage.session'] },
									{
										...
									}
								);
							}
					</section>
					<section data-markdown>
						### Game User Commands
						#### What we need to change it to
							function exposeGameUserCommands(app) {
								app.commandCenter.expose(
									{},	// no requirements
									{
										...
									}
								);
								app.commandCenter.expose(
									{ hooks: ['mage.session'] },
									{
										...
									}
								);
							}
							function setupUserCommands(cb) {
								exposeGameUserCommands(app);
							}
					</section>
					<section data-markdown>
						### Game User Commands
						#### Why do we need to change it
							function setupBot(cb) {
								logger.info('Setting up BOT interface');

								// Register additional function and pages
								require('./bot.js');

								// Create bot API
								mage.bot.createAPI(function (botApp) {
									// Expose game user commands under botApp
									exposeGameUserCommands(botApp);
            					
									// Expose app
									botApp.expose(cb);
								});
							}
					</section>
					<section data-markdown>
						### Scenario Registration
							bot.addScenario('continueMissions', function (options, cb) {
								// LOGIC
							}, function () {
								// CONDITION
							}
					</section>
					<section data-markdown>
						### BotPages
							bot.addBotPage('botName', paths.www + '/botPages/botName');
							bot.addBotPage('autoQuest', paths.www + '/botPages/autoQuest');
					</section>
					<section data-markdown>
						### Scenario Execution
						#### Define scenarios and options
							var options = {options.delay: 0};

							var scenarios = [
								{name: 'continueMissions', delay: 0, repetitions: 5},
								{name: 'healSurvivors', delay: 0, options: {}},
								{name: 'cureSurvivors', delay: 0, options: {}},
								{name: 'solveSurvivorProblems', delay: 0, options: {}}
							];

						#### Run Scenarios
							// Single execution
							bot.runScenarios(scenarios, options, cb);

							// Repetition
							bot.repeatScenarios(scenarios, options, function () {
								// Loop exit condtion
								// RETURN TRUE OR FALSE
							}, cb);
					</section>
				</section>

				<section>
					<section data-markdown>
						## What do we give you
					</section>
					<section data-markdown>
						### Bot User Management API
							exports.register('startBotSession', function (state, args, cb) {
								// PROVIDED
							});

							exports.register('endBotSession', function (state, args, cb) {
								// PROVIDED
							});
					</section>
					<section data-markdown>
						### All Game User Commands
							var mission = missions.getCurrentMission();
							
							missions.fightBoss(currentBoss, function (error, outcome) {
							});
							
							missions.doMission(mission.id, function (error) {
							});
					</section>
					<section data-markdown>
						### Client Scenario API
							bot.addScenario('continueMissions', function (options, cb) {
								// LOGIC
							}, function () {
								// CONDITION
							}

							// Single execution
							bot.runScenarios(scenarios, options, cb);

							// Repetition
							bot.repeatScenarios(scenarios, options, function () {
								// Loop exit condtion
								// RETURN TRUE OR FALSE
							}, cb);
					</section>
					<section data-markdown>
						### PhantomJS Loader
							curl http://HOST:PORT/app/bot/phantom | gunzip > loader.js;
							
							phantomjs loader.js PRE_SHARED_KEY BOT_NAME
					</section>
				</section>

				<section>
					<h2>How to get started</h2>
					<ol>
						<li class="fragment">
							Documentation
							<ol>
								<li>mage/lib/modules/bot/README.md</li>
								<li>mage/lib/modules/bot/*</li>
							</ol>
						</li>
						<li class="fragment">
							DRS Example Bots
							<ol>
								<li>lib/index.js</li>
								<li>lib/bot.js</li>
								<li>www/botPages/*</li>
								<li>www/botScenarios/*</li>
							</ol>
						</li>
						<li class="fragment">You can always ask me</li>
                                        </ol>
				</section>

				<section>
					<h2>Some Current Use Cases</h2>
					<ol>
						<li class="fragment">Testing panopticon-sampler</li>
						<li class="fragment">Testing observium mage application</li>
						<li class="fragment">Testing GamePad2</li>
					</ol>
				</section>

				<section>
					<h2>Other Possible Use Cases</h2>
					<ol>
						<li class="fragment">Unit testing</li>
						<li class="fragment">Load Testing</li>
						<li class="fragment">Capacity planning</li>
						<li class="fragment">Cute Demonstrations</li>
						<li class="fragment">Headless NPC's</li>
					</ol>
				</section>

				<section>
					<a href="http://almirkadric.github.com/presentations">http://almirkadric.github.com/presentations</a>
				</section>

				<section>
					<a href="index.html">Index</a>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
